(function() {
  var container, currentBlobData, defs, disableAllInput, discData, discs, fill, height, image, maxRadius, pattern, rotate, svg, updateDiscs, width;

  width = 960;

  height = 500;

  fill = d3.scale.category10();

  svg = d3.select('#svgContainer').append('svg').attr('width', width).attr('height', height).append('g').attr('transform', 'scale(2)');

  defs = svg.append('defs');

  pattern = defs.append('pattern').attr('id', 'image').attr('patternUnits', 'userSpaceOnUse').attr('height', '200').attr('width', '200');

  container = svg.append('g').attr("transform", "translate(0, 0)");

  image = pattern.append('image').attr('x', 0).attr('y', 0).attr('height', '200').attr('width', '200').attr('xlink:href', "image4.jpg");

  svg.append('text').attr('x', 10).attr('y', height - 10).text("Created with Fivas");

  discData = [8, 7, 6, 5, 4, 3, 2, 1];

  maxRadius = 100;

  discs = null;

  updateDiscs = function(data, radius, duration) {
    if (radius == null) {
      radius = maxRadius;
    }
    if (duration == null) {
      duration = 500;
    }
    discs = container.selectAll('.disc').data(data);
    discs.enter().append('circle').attr('class', 'disc').attr('cx', 100).attr('cy', 100).attr('r', 0);
    discs.transition().duration(duration).attr('r', function(d) {
      return radius * d / data.length;
    }).style('fill', "url(#image)");
    return discs.exit().transition().attr('r', 0).remove();
  };

  updateDiscs(discData);

  rotate = function(deg) {
    return function(d, i, a) {
      deg = ((discData.length - d + 1) * 2) * 180;
      if (i % 2 === 0) {
        deg = -deg;
      }
      return d3.interpolateString("rotate(0, 100, 100)", "rotate(" + deg + ", 100, 100)");
    };
  };

  currentBlobData = null;

  d3.select('#image').on('change', function() {
    var f;
    f = this.files[0];
    console.log("image change to", f);
    if (currentBlobData) {
      if (URL.invokeObjectURL) {
        URL.invokeObjectURL(currentBlobData);
      }
    }
    currentBlobData = URL.createObjectURL(f);
    return image.attr('xlink:href', currentBlobData);
  });

  disableAllInput = function(boo) {
    if (boo == null) {
      boo = true;
    }
    return d3.selectAll('.form-control, button').attr('disabled', boo ? true : null);
  };

  d3.select('#dividers').on('input', function() {
    var j, ref, results;
    d3.select('#dividersValue').text(this.value);
    discData = (function() {
      results = [];
      for (var j = ref = this.value; ref <= 1 ? j <= 1 : j >= 1; ref <= 1 ? j++ : j--){ results.push(j); }
      return results;
    }).apply(this);
    return updateDiscs(discData);
  });

  d3.select('#maxRadius').on('input', function() {
    d3.select('#maxRadiusValue').text(this.value);
    maxRadius = this.value;
    return updateDiscs(discData, maxRadius, 0);
  });

  d3.select('#start').on('click', function() {
    var oldWidth;
    oldWidth = discs.style('stroke-width');
    discs.style('stroke-width', 0);
    disableAllInput();
    return discs.transition().duration(5000).attrTween('transform', rotate(180)).each('end', function() {
      discs.style('stroke-width', oldWidth);
      return disableAllInput(false);
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,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LENBQW5DOztFQU9BLEVBQUUsQ0FBQyxNQUFILENBQVUsWUFBVixDQUF1QixDQUFDLEVBQXhCLENBQTJCLE9BQTNCLEVBQW9DLFNBQUE7SUFFbEMsRUFBRSxDQUFDLE1BQUgsQ0FBVSxpQkFBVixDQUE0QixDQUFDLElBQTdCLENBQWtDLElBQUksQ0FBQyxLQUF2QztJQUNBLFNBQUEsR0FBWSxJQUFJLENBQUM7V0FDakIsV0FBQSxDQUFZLFFBQVosRUFBc0IsU0FBdEIsRUFBaUMsQ0FBakM7RUFKa0MsQ0FBcEM7O0VBTUEsRUFBRSxDQUFDLE1BQUgsQ0FBVSxRQUFWLENBQW1CLENBQUMsRUFBcEIsQ0FBdUIsT0FBdkIsRUFBZ0MsU0FBQTtBQUM5QixRQUFBO0lBQUEsUUFBQSxHQUFXLEtBQUssQ0FBQyxLQUFOLENBQVksY0FBWjtJQUNYLEtBQUssQ0FBQyxLQUFOLENBQVksY0FBWixFQUE0QixDQUE1QjtJQUNBLGVBQUEsQ0FBQTtXQUVBLEtBQUssQ0FBQyxVQUFOLENBQUEsQ0FBa0IsQ0FBQyxRQUFuQixDQUE0QixJQUE1QixDQUNFLENBQUMsU0FESCxDQUNhLFdBRGIsRUFDMEIsTUFBQSxDQUFPLEdBQVAsQ0FEMUIsQ0FFQSxDQUFDLElBRkQsQ0FFTSxLQUZOLEVBRWEsU0FBQTtNQUNYLEtBQUssQ0FBQyxLQUFOLENBQVksY0FBWixFQUE0QixRQUE1QjthQUNBLGVBQUEsQ0FBZ0IsS0FBaEI7SUFGVyxDQUZiO0VBTDhCLENBQWhDO0FBeEZBIiwiZmlsZSI6InZpbnlsSW1hZ2UuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJ3aWR0aCA9IDk2MFxyXG5oZWlnaHQgPSA1MDBcclxuZmlsbCA9IGQzLnNjYWxlLmNhdGVnb3J5MTAoKVxyXG5cclxuc3ZnID0gZDMuc2VsZWN0KCcjc3ZnQ29udGFpbmVyJykuYXBwZW5kKCdzdmcnKVxyXG4gIC5hdHRyKCd3aWR0aCcsIHdpZHRoKVxyXG4gIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpXHJcbiAgICAuYXBwZW5kKCdnJylcclxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAnc2NhbGUoMiknKVxyXG5cclxuZGVmcyA9IHN2Zy5hcHBlbmQoJ2RlZnMnKVxyXG5cclxucGF0dGVybiA9IGRlZnMuYXBwZW5kKCdwYXR0ZXJuJylcclxuICAuYXR0cignaWQnLCAnaW1hZ2UnKVxyXG4gIC5hdHRyKCdwYXR0ZXJuVW5pdHMnLCAndXNlclNwYWNlT25Vc2UnKVxyXG4gIC5hdHRyKCdoZWlnaHQnLCAnMjAwJylcclxuICAuYXR0cignd2lkdGgnLCAnMjAwJylcclxuXHJcbmNvbnRhaW5lciA9IHN2Zy5hcHBlbmQoJ2cnKVxyXG4gIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsIDApXCIpXHJcblxyXG5pbWFnZSA9IHBhdHRlcm4uYXBwZW5kKCdpbWFnZScpXHJcbiAgLmF0dHIoJ3gnLCAwKVxyXG4gIC5hdHRyKCd5JywgMClcclxuICAuYXR0cignaGVpZ2h0JywgJzIwMCcpXHJcbiAgLmF0dHIoJ3dpZHRoJywgJzIwMCcpXHJcbiAgLmF0dHIoJ3hsaW5rOmhyZWYnLCBcImltYWdlNC5qcGdcIilcclxuICBcclxuc3ZnLmFwcGVuZCgndGV4dCcpXHJcbiAgLmF0dHIoJ3gnLCAxMClcclxuICAuYXR0cigneScsIGhlaWdodC0xMClcclxuICAudGV4dChcIkNyZWF0ZWQgd2l0aCBGaXZhc1wiKVxyXG5cclxuZGlzY0RhdGEgPSBbOCAuLjFdXHJcbm1heFJhZGl1cyA9IDEwMFxyXG5kaXNjcyA9IG51bGxcclxudXBkYXRlRGlzY3MgPSAoZGF0YSwgcmFkaXVzPW1heFJhZGl1cywgZHVyYXRpb249NTAwKSAtPlxyXG4gIGRpc2NzID0gY29udGFpbmVyLnNlbGVjdEFsbCgnLmRpc2MnKS5kYXRhKGRhdGEpXHJcblxyXG4gIGRpc2NzLmVudGVyKCkuYXBwZW5kKCdjaXJjbGUnKVxyXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2Rpc2MnKVxyXG4gICAgLmF0dHIoJ2N4JywgMTAwKVxyXG4gICAgLmF0dHIoJ2N5JywgMTAwKVxyXG4gICAgLmF0dHIoJ3InLCAwKVxyXG5cclxuICBkaXNjcy50cmFuc2l0aW9uKCkuZHVyYXRpb24oZHVyYXRpb24pXHJcbiAgICAuYXR0cigncicsIChkKSAtPiByYWRpdXMqZC9kYXRhLmxlbmd0aClcclxuICAgIC5zdHlsZSgnZmlsbCcsIFwidXJsKCNpbWFnZSlcIilcclxuXHJcbiAgZGlzY3MuZXhpdCgpLnRyYW5zaXRpb24oKVxyXG4gICAgLmF0dHIoJ3InLCAwKVxyXG4gICAgLnJlbW92ZSgpXHJcblxyXG51cGRhdGVEaXNjcyhkaXNjRGF0YSlcclxuXHJcbnJvdGF0ZSA9IChkZWcpIC0+IFxyXG4gIChkLGksYSkgLT5cclxuICAgIGRlZyA9ICgoZGlzY0RhdGEubGVuZ3RoLWQrMSkgKjIpICogMTgwXHJcbiAgICBpZiBpJTIgPT0gMCB0aGVuIGRlZyA9IC1kZWdcclxuICAgIGQzLmludGVycG9sYXRlU3RyaW5nKFwicm90YXRlKDAsIDEwMCwgMTAwKVwiLCBcInJvdGF0ZSgje2RlZ30sIDEwMCwgMTAwKVwiKVxyXG5cclxuY3VycmVudEJsb2JEYXRhID0gbnVsbFxyXG5kMy5zZWxlY3QoJyNpbWFnZScpLm9uICdjaGFuZ2UnLCAoKSAtPlxyXG4gIGYgPSB0aGlzLmZpbGVzWzBdXHJcbiAgY29uc29sZS5sb2cgXCJpbWFnZSBjaGFuZ2UgdG9cIiwgZlxyXG4gIGlmKGN1cnJlbnRCbG9iRGF0YSlcclxuICAgIGlmKFVSTC5pbnZva2VPYmplY3RVUkwpXHJcbiAgICAgIFVSTC5pbnZva2VPYmplY3RVUkwoY3VycmVudEJsb2JEYXRhKVxyXG5cclxuICBjdXJyZW50QmxvYkRhdGEgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGYpXHJcbiAgaW1hZ2UuYXR0cigneGxpbms6aHJlZicsIGN1cnJlbnRCbG9iRGF0YSlcclxuXHJcbmRpc2FibGVBbGxJbnB1dCA9IChib28gPSB0cnVlKSAtPlxyXG4gIGQzLnNlbGVjdEFsbCgnLmZvcm0tY29udHJvbCwgYnV0dG9uJykuYXR0cignZGlzYWJsZWQnLCBpZiBib28gdGhlbiB0cnVlIGVsc2UgbnVsbClcclxuXHJcbmQzLnNlbGVjdCgnI2RpdmlkZXJzJykub24gJ2lucHV0JywgKCkgLT5cclxuICAjIHVwZGF0ZSBndWlcclxuICBkMy5zZWxlY3QoJyNkaXZpZGVyc1ZhbHVlJykudGV4dCh0aGlzLnZhbHVlKVxyXG5cclxuICBkaXNjRGF0YSA9IFt0aGlzLnZhbHVlIC4uIDFdXHJcbiAgdXBkYXRlRGlzY3MoZGlzY0RhdGEpXHJcblxyXG5kMy5zZWxlY3QoJyNtYXhSYWRpdXMnKS5vbiAnaW5wdXQnLCAoKSAtPlxyXG4gICMgdXBkYXRlIGd1aVxyXG4gIGQzLnNlbGVjdCgnI21heFJhZGl1c1ZhbHVlJykudGV4dCh0aGlzLnZhbHVlKVxyXG4gIG1heFJhZGl1cyA9IHRoaXMudmFsdWVcclxuICB1cGRhdGVEaXNjcyhkaXNjRGF0YSwgbWF4UmFkaXVzLCAwKVxyXG5cclxuZDMuc2VsZWN0KCcjc3RhcnQnKS5vbiAnY2xpY2snLCAoKSAtPlxyXG4gIG9sZFdpZHRoID0gZGlzY3Muc3R5bGUoJ3N0cm9rZS13aWR0aCcpXHJcbiAgZGlzY3Muc3R5bGUoJ3N0cm9rZS13aWR0aCcsIDApXHJcbiAgZGlzYWJsZUFsbElucHV0KClcclxuXHJcbiAgZGlzY3MudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMDApXHJcbiAgICAuYXR0clR3ZWVuKCd0cmFuc2Zvcm0nLCByb3RhdGUoMTgwKSlcclxuICAuZWFjaCAnZW5kJywgKCkgLT5cclxuICAgIGRpc2NzLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBvbGRXaWR0aClcclxuICAgIGRpc2FibGVBbGxJbnB1dChmYWxzZSkiXX0=

(function() {
  var data, drawLine, f, generateData, height, line, margin, outerHeight, outerWidth, parseInputFunction, stepSize, svg, updateLine, updateScale, width, xAxis, xDomain, xScale, yAxis, yDomain, yScale;

  outerWidth = 1000;

  outerHeight = 600;

  margin = {
    top: 20,
    right: 20,
    bottom: 20,
    left: 20
  };

  width = outerWidth - margin.left - margin.right;

  height = outerHeight - margin.top - margin.bottom;

  svg = d3.select('#svgContainer').append('svg').attr('width', outerWidth).attr('height', outerHeight).append('g').attr('transform', "translate(" + margin.left + ", " + margin.top + ")");

  xDomain = [-10, 10];

  yDomain = [-2, 2];

  stepSize = .01;

  xScale = d3.scale.linear().range([0, width]).domain(xDomain);

  yScale = d3.scale.linear().range([height, 0]).domain(yDomain);

  xAxis = d3.svg.axis().scale(xScale).orient('bottom');

  yAxis = d3.svg.axis().scale(yScale).orient('left');

  f = function(x) {
    return Math.sin(x * x);
  };

  line = d3.svg.line().x(function(d) {
    return xScale(d.x);
  }).y(function(d) {
    return yScale(d.y);
  });

  data = null;

  generateData = function(f) {
    var i, j, ref, results, x;
    data = [];
    results = [];
    for (i = j = 0, ref = (xDomain[1] - xDomain[0]) * (1 / stepSize); 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
      x = xDomain[0] + i * stepSize;
      results.push(data.push({
        x: x,
        y: f(x)
      }));
    }
    return results;
  };

  generateData(f);

  drawLine = function() {
    return svg.append('path').datum(data).attr('class', 'line').attr('d', line);
  };

  drawLine();

  updateLine = function() {
    return svg.select('.line').transition().duration(750).attr('d', line(data));
  };

  updateScale = function() {
    svg.select('.line').transition().duration(750).attr('d', line(data));
    svg.select('.x.axis').transition().duration(750).call(xAxis);
    return svg.select('.y.axis').transition().duration(750).call(yAxis);
  };

  svg.append('g').attr('class', 'x axis').attr('transform', "translate(0, " + (height / 2) + ")").call(xAxis);

  svg.append('g').attr('class', 'y axis').attr('transform', "translate(" + (width / 2) + ", 0)").call(yAxis);

  d3.select('button').on('click', function() {
    var error, evalFunc, input, inputField;
    inputField = d3.select('#input');
    input = document.getElementById('input').value;
    if (input.length === 0) {
      return;
    }
    input = parseInputFunction(input);
    console.log('#########');
    console.log(input);
    console.log('#########');
    evalFunc = function(x) {
      return eval(input);
    };
    try {
      generateData(evalFunc);
      return updateLine();
    } catch (error) {
      return console.log('something went wrong');
    }
  });

  d3.select('#xRange').on('change', function() {
    var value;
    value = +document.getElementById('xRange').value;
    value += 50;
    value = value || 1;
    xDomain = [-value, value];
    xScale.domain(xDomain);
    return updateScale();
  });

  d3.select('#yRange').on('change', function() {
    var value;
    value = +document.getElementById('yRange').value;
    value += 50;
    value = value || 1;
    yDomain = [-value, value];
    yScale.domain(yDomain);
    return updateScale();
  });

  parseInputFunction = function(input) {
    var buildInFunction, func, j, k, len, len1;
    buildInFunction = ['sin', 'cos', 'tan', 'exp'];
    input = input.replace(/[0-9]+x/g, function(match) {
      var xPosition;
      xPosition = match.length - 1;
      return match.substr(0, xPosition) + '*x';
    });
    for (j = 0, len = buildInFunction.length; j < len; j++) {
      func = buildInFunction[j];
      input = input.replace(new RegExp("[0-9]+" + func, 'g'), function(match) {
        var xPosition;
        xPosition = match.length - func.length;
        return match.substr(0, xPosition) + ("*" + func);
      });
    }
    for (k = 0, len1 = buildInFunction.length; k < len1; k++) {
      func = buildInFunction[k];
      input = input.replace(new RegExp(func, 'g'), "Math." + func);
    }
    return input;
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZ1bmN0aW9uRHJhd2VyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQTtBQUFBLE1BQUE7O0VBQUEsVUFBQSxHQUFjOztFQUNkLFdBQUEsR0FBYzs7RUFFZCxNQUFBLEdBQ0U7SUFBQSxHQUFBLEVBQVEsRUFBUjtJQUNBLEtBQUEsRUFBUSxFQURSO0lBRUEsTUFBQSxFQUFRLEVBRlI7SUFHQSxJQUFBLEVBQVEsRUFIUjs7O0VBS0YsS0FBQSxHQUFRLFVBQUEsR0FBYSxNQUFNLENBQUMsSUFBcEIsR0FBMkIsTUFBTSxDQUFDOztFQUMxQyxNQUFBLEdBQVMsV0FBQSxHQUFjLE1BQU0sQ0FBQyxHQUFyQixHQUEyQixNQUFNLENBQUM7O0VBRzNDLEdBQUEsR0FBTSxFQUFFLENBQUMsTUFBSCxDQUFVLGVBQVYsQ0FBMEIsQ0FBQyxNQUEzQixDQUFrQyxLQUFsQyxDQUNGLENBQUMsSUFEQyxDQUNJLE9BREosRUFDYSxVQURiLENBRUYsQ0FBQyxJQUZDLENBRUksUUFGSixFQUVjLFdBRmQsQ0FHSixDQUFDLE1BSEcsQ0FHSSxHQUhKLENBSUYsQ0FBQyxJQUpDLENBSUksV0FKSixFQUlpQixZQUFBLEdBQWEsTUFBTSxDQUFDLElBQXBCLEdBQXlCLElBQXpCLEdBQTZCLE1BQU0sQ0FBQyxHQUFwQyxHQUF3QyxHQUp6RDs7RUFPTixPQUFBLEdBQVUsQ0FBQyxDQUFDLEVBQUYsRUFBTSxFQUFOOztFQUNWLE9BQUEsR0FBVSxDQUFDLENBQUMsQ0FBRixFQUFLLENBQUw7O0VBQ1YsUUFBQSxHQUFXOztFQUVYLE1BQUEsR0FBUyxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQVQsQ0FBQSxDQUNMLENBQUMsS0FESSxDQUNFLENBQUMsQ0FBRCxFQUFJLEtBQUosQ0FERixDQUVMLENBQUMsTUFGSSxDQUVHLE9BRkg7O0VBSVQsTUFBQSxHQUFTLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBVCxDQUFBLENBQ0wsQ0FBQyxLQURJLENBQ0UsQ0FBQyxNQUFELEVBQVMsQ0FB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LEdBQVEsS0FBQSxJQUFTO0lBQ2pCLE9BQUEsR0FBVSxDQUFDLENBQUMsS0FBRixFQUFTLEtBQVQ7SUFDVixNQUFNLENBQUMsTUFBUCxDQUFjLE9BQWQ7V0FDQSxXQUFBLENBQUE7RUFOZ0MsQ0FBbEM7O0VBUUEsa0JBQUEsR0FBcUIsU0FBQyxLQUFEO0FBQ25CLFFBQUE7SUFBQSxlQUFBLEdBQWtCLENBQUMsS0FBRCxFQUFRLEtBQVIsRUFBZSxLQUFmLEVBQXNCLEtBQXRCO0lBR2xCLEtBQUEsR0FBUSxLQUFLLENBQUMsT0FBTixDQUFjLFVBQWQsRUFBMEIsU0FBQyxLQUFEO0FBQ2hDLFVBQUE7TUFBQSxTQUFBLEdBQVksS0FBSyxDQUFDLE1BQU4sR0FBYTthQUN6QixLQUFLLENBQUMsTUFBTixDQUFhLENBQWIsRUFBZ0IsU0FBaEIsQ0FBQSxHQUE2QjtJQUZHLENBQTFCO0FBS1IsU0FBQSxpREFBQTs7TUFDRSxLQUFBLEdBQVEsS0FBSyxDQUFDLE9BQU4sQ0FBa0IsSUFBQSxNQUFBLENBQU8sUUFBQSxHQUFTLElBQWhCLEVBQXdCLEdBQXhCLENBQWxCLEVBQWdELFNBQUMsS0FBRDtBQUN0RCxZQUFBO1FBQUEsU0FBQSxHQUFZLEtBQUssQ0FBQyxNQUFOLEdBQWEsSUFBSSxDQUFDO2VBQzlCLEtBQUssQ0FBQyxNQUFOLENBQWEsQ0FBYixFQUFnQixTQUFoQixDQUFBLEdBQTZCLENBQUEsR0FBQSxHQUFJLElBQUo7TUFGeUIsQ0FBaEQ7QUFEVjtBQU1BLFNBQUEsbURBQUE7O01BQ0UsS0FBQSxHQUFRLEtBQUssQ0FBQyxPQUFOLENBQWtCLElBQUEsTUFBQSxDQUFPLElBQVAsRUFBYSxHQUFiLENBQWxCLEVBQXFDLE9BQUEsR0FBUSxJQUE3QztBQURWO1dBR0E7RUFsQm1CO0FBeklyQiIsImZpbGUiOiJmdW5jdGlvbkRyYXdlci5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuXHJcbiMgY29uZmlndXJlIGRpbWVuc2lvbnNcclxub3V0ZXJXaWR0aCA9ICAxMDAwXHJcbm91dGVySGVpZ2h0ID0gNjAwXHJcblxyXG5tYXJnaW4gPVxyXG4gIHRvcDogICAgMjBcclxuICByaWdodDogIDIwXHJcbiAgYm90dG9tOiAyMFxyXG4gIGxlZnQ6ICAgMjBcclxuXHJcbndpZHRoID0gb3V0ZXJXaWR0aCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0XHJcbmhlaWdodCA9IG91dGVySGVpZ2h0IC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b21cclxuXHJcbiMgY3JlYXRlIHN2ZyBlbGVtZW50XHJcbnN2ZyA9IGQzLnNlbGVjdCgnI3N2Z0NvbnRhaW5lcicpLmFwcGVuZCgnc3ZnJylcclxuICAgIC5hdHRyKCd3aWR0aCcsIG91dGVyV2lkdGgpXHJcbiAgICAuYXR0cignaGVpZ2h0Jywgb3V0ZXJIZWlnaHQpXHJcbiAgLmFwcGVuZCgnZycpXHJcbiAgICAuYXR0cigndHJhbnNmb3JtJywgXCJ0cmFuc2xhdGUoI3ttYXJnaW4ubGVmdH0sICN7bWFyZ2luLnRvcH0pXCIpXHJcblxyXG4jIHNjYWxlc1xyXG54RG9tYWluID0gWy0xMCwgMTBdXHJcbnlEb21haW4gPSBbLTIsIDJdXHJcbnN0ZXBTaXplID0gLjAxXHJcblxyXG54U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxyXG4gICAgLnJhbmdlKFswLCB3aWR0aF0pXHJcbiAgICAuZG9tYWluKHhEb21haW4pXHJcblxyXG55U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxyXG4gICAgLnJhbmdlKFtoZWlnaHQsIDBdKVxyXG4gICAgLmRvbWFpbih5RG9tYWluKVxyXG5cclxuIyBheGlzXHJcbnhBeGlzID0gZDMuc3ZnLmF4aXMoKVxyXG4gICAgLnNjYWxlKHhTY2FsZSlcclxuICAgIC5vcmllbnQoJ2JvdHRvbScpXHJcblxyXG55QXhpcyA9IGQzLnN2Zy5heGlzKClcclxuICAgIC5zY2FsZSh5U2NhbGUpXHJcbiAgICAub3JpZW50KCdsZWZ0JylcclxuXHJcbiMgZnVuY3Rpb25cclxuZiA9ICh4KSAtPiBNYXRoLnNpbiB4KnhcclxuXHJcbiMgbGluZVxyXG5saW5lID0gZDMuc3ZnLmxpbmUoKVxyXG4gICAgLngoKGQpIC0+IHhTY2FsZShkLngpIClcclxuICAgIC55KChkKSAtPiB5U2NhbGUoZC55KSApXHJcblxyXG5kYXRhID0gbnVsbFxyXG4jIGdlbmVyYXRlIGRhdGFcclxuZ2VuZXJhdGVEYXRhID0gKGYpIC0+XHJcbiAgZGF0YSA9IFtdXHJcbiAgZm9yIGkgaW4gWzAgLi4uICh4RG9tYWluWzFdIC0geERvbWFpblswXSkgKiAoMS9zdGVwU2l6ZSkgXVxyXG4gICAgeCA9IHhEb21haW5bMF0gKyBpKnN0ZXBTaXplXHJcbiAgICBkYXRhLnB1c2hcclxuICAgICAgeDogeFxyXG4gICAgICB5OiBmKHgpXHJcblxyXG5nZW5lcmF0ZURhdGEoZilcclxuXHJcbiMgZHJhdyBsaW5lXHJcbmRyYXdMaW5lID0gKCkgLT5cclxuICBzdmcuYXBwZW5kKCdwYXRoJylcclxuICAgIC5kYXR1bShkYXRhKVxyXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUnKVxyXG4gICAgLmF0dHIoJ2QnLCBsaW5lKVxyXG5kcmF3TGluZSgpXHJcblxyXG51cGRhdGVMaW5lID0gKCkgLT5cclxuICBzdmcuc2VsZWN0KCcubGluZScpLnRyYW5zaXRpb24oKVxyXG4gICAgICAuZHVyYXRpb24oNzUwKVxyXG4gICAgICAuYXR0cignZCcsIGxpbmUoZGF0YSkpXHJcblxyXG51cGRhdGVTY2FsZSA9ICgpIC0+XHJcbiAgc3ZnLnNlbGVjdCgnLmxpbmUnKS50cmFuc2l0aW9uKClcclxuICAgICAgLmR1cmF0aW9uKDc1MClcclxuICAgICAgLmF0dHIoJ2QnLCBsaW5lKGRhdGEpKVxyXG5cclxuICBzdmcuc2VsZWN0KCcueC5heGlzJykudHJhbnNpdGlvbigpXHJcbiAgICAgIC5kdXJhdGlvbig3NTApXHJcbiAgICAgIC5jYWxsKHhBeGlzKVxyXG5cclxuICBzdmcuc2VsZWN0KCcueS5heGlzJykudHJhbnNpdGlvbigpXHJcbiAgICAgIC5kdXJhdGlvbig3NTApXHJcbiAgICAgIC5jYWxsKHlBeGlzKVxyXG5cclxuIyBkcmF3IGF4aXNcclxuc3ZnLmFwcGVuZCgnZycpXHJcbiAgICAuYXR0cignY2xhc3MnLCAneCBheGlzJylcclxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBcInRyYW5zbGF0ZSgwLCAje2hlaWdodC8yfSlcIilcclxuICAuY2FsbCh4QXhpcylcclxuXHJcbnN2Zy5hcHBlbmQoJ2cnKVxyXG4gICAgLmF0dHIoJ2NsYXNzJywgJ3kgYXhpcycpXHJcbiAgICAuYXR0cigndHJhbnNmb3JtJywgXCJ0cmFuc2xhdGUoI3t3aWR0aC8yfSwgMClcIilcclxuICAuY2FsbCh5QXhpcylcclxuXHJcbiMgYWRkIGV2ZW50IGxpc3RlbmVyXHJcbmQzLnNlbGVjdCgnYnV0dG9uJykub24gJ2NsaWNrJywgKCkgLT5cclxuICBpbnB1dEZpZWxkID0gZDMuc2VsZWN0KCcjaW5wdXQnKVxyXG4gIGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0JykudmFsdWVcclxuXHJcbiAgaWYgaW5wdXQubGVuZ3RoID09IDBcclxuICAgIHJldHVyblxyXG4gIGlucHV0ID0gcGFyc2VJbnB1dEZ1bmN0aW9uKGlucHV0KVxyXG4gIGNvbnNvbGUubG9nICcjIyMjIyMjIyMnXHJcbiAgY29uc29sZS5sb2cgaW5wdXRcclxuICBjb25zb2xlLmxvZyAnIyMjIyMjIyMjJ1xyXG5cclxuICBldmFsRnVuYyA9ICh4KSAtPlxyXG4gICAgZXZhbChpbnB1dClcclxuXHJcbiAgdHJ5XHJcbiAgICBnZW5lcmF0ZURhdGEoZXZhbEZ1bmMpXHJcbiAgICB1cGRhdGVMaW5lKClcclxuICBjYXRjaFxyXG4gICAgY29uc29sZS5sb2cgJ3NvbWV0aGluZyB3ZW50IHdyb25nJ1xyXG5cclxuXHJcbiMgc2xpZGVyXHJcbmQzLnNlbGVjdCgnI3hSYW5nZScpLm9uICdjaGFuZ2UnLCAoKSAtPlxyXG4gIHZhbHVlID0gK2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd4UmFuZ2UnKS52YWx1ZVxyXG4gIHZhbHVlICs9IDUwXHJcbiAgdmFsdWUgPSB2YWx1ZSB8fCAxXHJcbiAgeERvbWFpbiA9IFstdmFsdWUsIHZhbHVlXVxyXG4gIHhTY2FsZS5kb21haW4oeERvbWFpbilcclxuICB1cGRhdGVTY2FsZSgpXHJcblxyXG5kMy5zZWxlY3QoJyN5UmFuZ2UnKS5vbiAnY2hhbmdlJywgKCkgLT5cclxuICB2YWx1ZSA9ICtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneVJhbmdlJykudmFsdWVcclxuICB2YWx1ZSArPSA1MFxyXG4gIHZhbHVlID0gdmFsdWUgfHwgMVxyXG4gIHlEb21haW4gPSBbLXZhbHVlLCB2YWx1ZV1cclxuICB5U2NhbGUuZG9tYWluKHlEb21haW4pXHJcbiAgdXBkYXRlU2NhbGUoKVxyXG5cclxucGFyc2VJbnB1dEZ1bmN0aW9uID0gKGlucHV0KSAtPlxyXG4gIGJ1aWxkSW5GdW5jdGlvbiA9IFsnc2luJywgJ2NvcycsICd0YW4nLCAnZXhwJ11cclxuXHJcbiAgIyAzeCAtPiAzKnhcclxuICBpbnB1dCA9IGlucHV0LnJlcGxhY2UgL1swLTldK3gvZywgKG1hdGNoKSAtPlxyXG4gICAgeFBvc2l0aW9uID0gbWF0Y2gubGVuZ3RoLTFcclxuICAgIG1hdGNoLnN1YnN0cigwLCB4UG9zaXRpb24pICsgJyp4J1xyXG5cclxuICAjIDEwc2luKHgpIC0+IDEwKnNpbih4KVxyXG4gIGZvciBmdW5jIGluIGJ1aWxkSW5GdW5jdGlvblxyXG4gICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlIG5ldyBSZWdFeHAoXCJbMC05XSsje2Z1bmN9XCIsICdnJyksIChtYXRjaCkgLT5cclxuICAgICAgeFBvc2l0aW9uID0gbWF0Y2gubGVuZ3RoLWZ1bmMubGVuZ3RoXHJcbiAgICAgIG1hdGNoLnN1YnN0cigwLCB4UG9zaXRpb24pICsgXCIqI3tmdW5jfVwiXHJcblxyXG4gICMgc2luKHgpIC0+IE1hdGguc2luKHgpXHJcbiAgZm9yIGZ1bmMgaW4gYnVpbGRJbkZ1bmN0aW9uXHJcbiAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UobmV3IFJlZ0V4cChmdW5jLCAnZycpLCBcIk1hdGguI3tmdW5jfVwiKVxyXG5cclxuICBpbnB1dFxyXG4gIFxyXG4gICMgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKG5ldyBSZWdFeHAoJ2NvcycsICdnJyksICdNYXRoLmNvcycpXHJcbiAgIyBpbnB1dCA9IGlucHV0LnJlcGxhY2UobmV3IFJlZ0V4cCgndGFuJywgJ2cnKSwgJ01hdGgudGFuJylcclxuICAjIGlucHV0ID0gaW5wdXQucmVwbGFjZShuZXcgUmVnRXhwKCdleHAnLCAnZycpLCAnTWF0aC5leHAnKVxyXG4iXX0=

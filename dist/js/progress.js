(function() {
  var height, plugin, progress, svg, width;

  plugin = {};

  plugin.addConfigurations = function(outer, obj, settings, defaults) {
    var i, idx, len, results, setting;
    results = [];
    for (idx = i = 0, len = settings.length; i < len; idx = ++i) {
      setting = settings[idx];
      obj[setting] = (function(setting) {
        return function(newVal) {
          if (arguments.length === 0) {
            return outer[setting];
          }
          outer[setting] = newVal;
          return obj;
        };
      })(setting);
      results.push(outer[setting] = defaults[idx]);
    }
    return results;
  };

  plugin.progress = function() {
    var height, progress, settings, width;
    settings = {};
    width = 500;
    height = 30;
    progress = function(group) {
      var borderRadius, render;
      borderRadius = 10;
      group.append('rect').attr('class', 'background').attr('rx', borderRadius).attr('ry', borderRadius).attr('width', width).attr('height', height);
      render = function(data) {
        var bars, color, desc, names, values, xScale;
        if (typeof data[0] === 'object') {
          values = data.map(function(d) {
            return d.value;
          });
          names = data.map(function(d) {
            return d.description;
          });
        } else {
          values = data;
          names = [];
        }
        console.log("render " + data.length + " items");
        xScale = d3.scale.linear().domain([0, d3.sum(values)]).range([0, width]);
        if (settings.total) {
          xScale.domain([0, settings.total]);
        }
        color = d3.scale.ordinal().range(['#1BBC9B', '#EFAD4D', '#D9544F']);
        bars = group.selectAll('.bar').data(values);
        bars.enter().append('rect').attr('class', 'bar').attr('rx', function(d, idx) {
          if (!idx) {
            return borderRadius;
          }
        }).attr('ry', function(d, idx) {
          if (!idx) {
            return borderRadius;
          }
        }).style('fill', color);
        bars.transition().duration(1000).attr('x', function(d, idx) {
          return xScale(d3.sum(values.slice(0, idx)));
        }).attr('width', function(d, idx) {
          if (idx) {
            return xScale(d);
          }
          return xScale(d) + 10;
        }).attr('height', height);
        desc = group.selectAll('.desc').data(names);
        desc.enter().append('text').attr('class', 'desc').attr('y', -5).style('fill', function(d, idx) {
          return color(idx);
        }).text(function(d) {
          return d;
        });
        desc.transition().duration(1000).attr('x', function(d, idx) {
          return Math.max(xScale(d3.sum(values.slice(0, idx))), 50 * idx);
        });
        return group.selectAll('.border').data([0]).enter().append('rect').attr('class', 'border').attr('rx', borderRadius).attr('ry', borderRadius).attr('width', width).attr('height', height);
      };
      render(settings.values);
      return progress.update = function() {
        return render(settings.values);
      };
    };
    plugin.addConfigurations(settings, progress, ['total', 'values', 'asd'], [0, [80], 'to come']);
    return progress;
  };

  console.log('progress test');

  width = 8000;

  height = 6000;

  svg = d3.select('body').append('svg').attr('width', width).attr('height', height);

  progress = plugin.progress().values([
    {
      value: Math.random() * 50,
      description: 'Niklas'
    }, {
      value: Math.random() * 50,
      description: 'Doro'
    }, {
      value: Math.random() * 50,
      description: 'Milena'
    }
  ]).total(120);

  svg.append('g').attr('class', 'progress').attr('transform', "translate(" + 50. + ", " + 150. + ") scale(2.5)").call(progress);

  setInterval(function() {
    progress.values()[0].value = Math.random() * 50;
    progress.values()[1].value = Math.random() * 50;
    progress.values()[2].value = Math.random() * 50;
    return progress.update();
  }, 2000);

  svg.app;

}).call(this);

//# sourceMappingURL=data:application/json;base64,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LENBQUM7QUEzSUoiLCJmaWxlIjoicHJvZ3Jlc3MuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyIjIHBzZXVkbyBwbHVnaW4gY29udGFpbmVyXHJcbnBsdWdpbiA9IHt9XHJcblxyXG4jIGhlbHBlciBmdW5jdGlvbiBmb3Igc2V0dGluZ3NcclxucGx1Z2luLmFkZENvbmZpZ3VyYXRpb25zID0gKG91dGVyLCBvYmosIHNldHRpbmdzLCBkZWZhdWx0cykgLT5cclxuICBmb3Igc2V0dGluZywgaWR4IGluIHNldHRpbmdzXHJcbiAgICBcclxuICAgIG9ialtzZXR0aW5nXSA9ICgoc2V0dGluZykgLT5cclxuICAgICAgKG5ld1ZhbCkgLT5cclxuICAgICAgICBpZiBhcmd1bWVudHMubGVuZ3RoID09IDBcclxuICAgICAgICAgIHJldHVybiBvdXRlcltzZXR0aW5nXVxyXG4gICAgICAgIG91dGVyW3NldHRpbmddID0gbmV3VmFsXHJcbiAgICAgICAgb2JqXHJcbiAgICApKHNldHRpbmcpXHJcblxyXG4gICAgb3V0ZXJbc2V0dGluZ10gPSBkZWZhdWx0c1tpZHhdXHJcblxyXG4jIGFkZCBwcm9ncmVzcyBwbHVnaW5cclxucGx1Z2luLnByb2dyZXNzID0gKCkgLT5cclxuICAjIHNldHRpbmdzIG9iamVjdFxyXG4gIHNldHRpbmdzID0ge31cclxuXHJcbiAgd2lkdGggID0gNTAwXHJcbiAgaGVpZ2h0ID0gMzBcclxuICBcclxuICAjIGdlbmVyYXRvciBmdW5jdGlvblxyXG4gIHByb2dyZXNzID0gKGdyb3VwKSAtPlxyXG4gICAgIyBiYWNrZ3JvdW5kXHJcbiAgICBib3JkZXJSYWRpdXMgPSAxMFxyXG4gICAgZ3JvdXAuYXBwZW5kKCdyZWN0JylcclxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2JhY2tncm91bmQnKVxyXG4gICAgICAuYXR0cigncngnLCBib3JkZXJSYWRpdXMpXHJcbiAgICAgIC5hdHRyKCdyeScsIGJvcmRlclJhZGl1cylcclxuICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXHJcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpXHJcblxyXG5cclxuICAgIHJlbmRlciA9IChkYXRhKSAtPlxyXG4gICAgICBpZiB0eXBlb2YgZGF0YVswXSA9PSAnb2JqZWN0J1xyXG4gICAgICAgIHZhbHVlcyA9IGRhdGEubWFwIChkKSAtPiBkLnZhbHVlXHJcbiAgICAgICAgbmFtZXMgID0gZGF0YS5tYXAgKGQpIC0+IGQuZGVzY3JpcHRpb25cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHZhbHVlcyA9IGRhdGFcclxuICAgICAgICBuYW1lcyAgPSBbXVxyXG5cclxuICAgICAgY29uc29sZS5sb2cgXCJyZW5kZXIgI3tkYXRhLmxlbmd0aH0gaXRlbXNcIlxyXG5cclxuICAgICAgeFNjYWxlID0gZDMuc2NhbGUubGluZWFyKCkuZG9tYWluKFswLCBkMy5zdW0odmFsdWVzKV0pLnJhbmdlKFswLCB3aWR0aF0pXHJcbiAgICAgIGlmIHNldHRpbmdzLnRvdGFsXHJcbiAgICAgICAgeFNjYWxlLmRvbWFpbihbMCwgc2V0dGluZ3MudG90YWxdKVxyXG5cclxuICAgICAgY29sb3IgPSBkMy5zY2FsZS5vcmRpbmFsKClcclxuICAgICAgICAucmFuZ2UoWycjMUJCQzlCJywgJyNFRkFENEQnLCAnI0Q5NTQ0RiddKVxyXG5cclxuICAgICAgIyBhY3R1YWwgYmFyc1xyXG4gICAgICBiYXJzID0gZ3JvdXAuc2VsZWN0QWxsKCcuYmFyJykuZGF0YSh2YWx1ZXMpXHJcbiAgICAgIFxyXG4gICAgICBiYXJzLmVudGVyKCkuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAuYXR0ciAnY2xhc3MnLCAnYmFyJ1xyXG4gICAgICAgIC5hdHRyICdyeCcsIChkLCBpZHgpIC0+XHJcbiAgICAgICAgICBpZiAhaWR4XHJcbiAgICAgICAgICAgIHJldHVybiBib3JkZXJSYWRpdXNcclxuICAgICAgICAuYXR0ciAncnknLCAoZCwgaWR4KSAtPlxyXG4gICAgICAgICAgaWYgIWlkeFxyXG4gICAgICAgICAgICByZXR1cm4gYm9yZGVyUmFkaXVzXHJcbiAgICAgICAgLnN0eWxlICdmaWxsJywgY29sb3JcclxuXHJcbiAgICAgIGJhcnMudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEwMDApXHJcbiAgICAgICAgLmF0dHIgJ3gnLCAoZCwgaWR4KSAtPiB4U2NhbGUoIGQzLnN1bSh2YWx1ZXMuc2xpY2UoMCwgaWR4KSkgKVxyXG4gICAgICAgIC5hdHRyICd3aWR0aCcsIChkLCBpZHgpIC0+XHJcbiAgICAgICAgICBpZiBpZHhcclxuICAgICAgICAgICAgcmV0dXJuIHhTY2FsZShkKVxyXG4gICAgICAgICAgcmV0dXJuIHhTY2FsZShkKSsxMFxyXG4gICAgICAgIC5hdHRyICdoZWlnaHQnLCBoZWlnaHRcclxuXHJcbiAgICAgICMgYmFycyBkZXNjcmlwdGlvblxyXG4gICAgICBkZXNjID0gZ3JvdXAuc2VsZWN0QWxsKCcuZGVzYycpLmRhdGEobmFtZXMpXHJcblxyXG4gICAgICBkZXNjLmVudGVyKCkuYXBwZW5kKCd0ZXh0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnZGVzYycpXHJcbiAgICAgICAgLmF0dHIoJ3knLCAtNSlcclxuICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAoZCwgaWR4KSAtPiBjb2xvcihpZHgpKVxyXG4gICAgICAgIC50ZXh0KChkKSAtPiBkKVxyXG5cclxuICAgICAgZGVzYy50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwMClcclxuICAgICAgICAuYXR0cigneCcsIChkLCBpZHgpIC0+IE1hdGgubWF4KHhTY2FsZSggZDMuc3VtKHZhbHVlcy5zbGljZSgwLCBpZHgpKSApLCA1MCppZHgpIClcclxuXHJcbiAgICAgICMgYmFja2dyb3VuZCBib3JkZXJcclxuICAgICAgZ3JvdXAuc2VsZWN0QWxsKCcuYm9yZGVyJykuZGF0YShbMF0pLmVudGVyKCkuYXBwZW5kKCdyZWN0JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnYm9yZGVyJylcclxuICAgICAgICAuYXR0cigncngnLCBib3JkZXJSYWRpdXMpXHJcbiAgICAgICAgLmF0dHIoJ3J5JywgYm9yZGVyUmFkaXVzKVxyXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsIHdpZHRoKVxyXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpXHJcblxyXG4gICAgcmVuZGVyKHNldHRpbmdzLnZhbHVlcylcclxuICAgIHByb2dyZXNzLnVwZGF0ZSA9ICgpIC0+XHJcbiAgICAgIHJlbmRlcihzZXR0aW5ncy52YWx1ZXMpXHJcblxyXG5cclxuICAjIGJpbmQgc2V0dGluZ3MgdG8gZ2VuZXJhdG9yXHJcbiAgcGx1Z2luLmFkZENvbmZpZ3VyYXRpb25zIHNldHRpbmdzLCBwcm9ncmVzcyxcclxuICAgIFsndG90YWwnLCAndmFsdWVzJywgJ2FzZCddLFxyXG4gICAgWzAgICAgICAsIFs4MF0gICAgLCAndG8gY29tZSddXHJcblxyXG4gICMgcmV0dXJuIGdlbmVyYXRvclxyXG4gIHByb2dyZXNzXHJcblxyXG5cclxuIyBhY3R1YWwgc3RhcnRcclxuY29uc29sZS5sb2cgJ3Byb2dyZXNzIHRlc3QnXHJcblxyXG53aWR0aCA9ICA4MDAwXHJcbmhlaWdodCA9IDYwMDBcclxuXHJcbnN2ZyA9IGQzLnNlbGVjdCgnYm9keScpLmFwcGVuZCgnc3ZnJylcclxuICAuYXR0cignd2lkdGgnLCB3aWR0aClcclxuICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KVxyXG5cclxucHJvZ3Jlc3MgPSBwbHVnaW4ucHJvZ3Jlc3MoKVxyXG4gIC52YWx1ZXMoW1xyXG4gICAgeyB2YWx1ZTogTWF0aC5yYW5kb20oKSAqIDUwLCBkZXNjcmlwdGlvbjogJ05pa2xhcycgfVxyXG4gICAgeyB2YWx1ZTogTWF0aC5yYW5kb20oKSAqIDUwLCBkZXNjcmlwdGlvbjogJ0Rvcm8nIH1cclxuICAgIHsgdmFsdWU6IE1hdGgucmFuZG9tKCkgKiA1MCwgZGVzY3JpcHRpb246ICdNaWxlbmEnIH1cclxuICBdKVxyXG4gIC50b3RhbCgxMjApXHJcblxyXG5zdmcuYXBwZW5kKCdnJylcclxuICAuYXR0cignY2xhc3MnLCAncHJvZ3Jlc3MnKVxyXG4gIC5hdHRyKCd0cmFuc2Zvcm0nLCBcInRyYW5zbGF0ZSgjezUwfSwgI3sxNTB9KSBzY2FsZSgyLjUpXCIpXHJcbiAgLmNhbGwocHJvZ3Jlc3MpXHJcblxyXG5zZXRJbnRlcnZhbCAoKSAtPlxyXG4gIHByb2dyZXNzLnZhbHVlcygpWzBdLnZhbHVlID0gTWF0aC5yYW5kb20oKSAqIDUwXHJcbiAgcHJvZ3Jlc3MudmFsdWVzKClbMV0udmFsdWUgPSBNYXRoLnJhbmRvbSgpICogNTBcclxuICBwcm9ncmVzcy52YWx1ZXMoKVsyXS52YWx1ZSA9IE1hdGgucmFuZG9tKCkgKiA1MFxyXG5cclxuICBwcm9ncmVzcy51cGRhdGUoKVxyXG4sIDIwMDBcclxuXHJcbnN2Zy5hcHAiXX0=

(function() {
  var g, gauge2, height, i, plugin, svg, width;

  plugin = {};

  plugin.addConfigurations = function(outer, obj, settings, defaults) {
    var idx, j, len, results, setting;
    results = [];
    for (idx = j = 0, len = settings.length; j < len; idx = ++j) {
      setting = settings[idx];
      obj[setting] = (function(setting) {
        return function(newVal) {
          if (arguments.length === 0) {
            return outer[setting];
          }
          outer[setting] = newVal;
          return obj;
        };
      })(setting);
      results.push(outer[setting] = defaults[idx]);
    }
    return results;
  };

  plugin.gauge = function() {
    var arcTween, bottumText, gauge, max, min, renderValue, value;
    min = 0;
    max = 100;
    value = 0;
    renderValue = 0;
    bottumText = 'Visitors';
    arcTween = function(arc, oldVal, newVal) {
      return function(d) {
        var i;
        i = d3.interpolateNumber(oldVal, newVal);
        return function(t) {
          return arc(i(t));
        };
      };
    };
    gauge = function(arcGroup) {
      var arc, arcElm, getTickX, getTickY, j, k, outerArc, outerOuterArc, results, results1, text, tickCount, tickScale;
      console.log("init draw " + min + ", " + max + ", " + value + ", " + text);
      arc = d3.svg.arc().startAngle(0.75 * 2 * Math.PI).endAngle(function(d) {
        return (0.75 * 2 * Math.PI) + (Math.min(Math.max(d, 0), 1) * Math.PI);
      }).innerRadius(85).outerRadius(110);
      outerArc = d3.svg.arc().startAngle(0.75 * 2 * Math.PI).endAngle(0.75 * 2 * Math.PI + Math.PI).innerRadius(85).outerRadius(110);
      outerOuterArc = d3.svg.arc().startAngle(0.75 * 2 * Math.PI).endAngle(0.75 * 2 * Math.PI + Math.PI).innerRadius(85).outerRadius(110);
      text = arcGroup.append('text').attr('y', -25).attr('class', 'innerText').text((Math.round(value)) + "%");
      arcGroup.append('text').attr('y', 0).style('text-anchor', 'middle').style('fill', 'black').style('font-size', '1.2em').text(bottumText);
      arcGroup.append('path').attr('d', outerArc).attr('class', 'outline');
      renderValue = value / (max - min);
      arcElm = arcGroup.append('path').data([renderValue]).attr('d', function(d) {
        return arc(d);
      }).attr('class', 'bar');
      tickCount = 5;
      getTickX = function(n, rad) {
        var deg, pos;
        pos = n / tickCount;
        deg = -Math.PI + pos * Math.PI;
        return Math.cos(deg) * rad;
      };
      getTickY = function(n, rad) {
        var deg, pos;
        pos = n / tickCount;
        deg = -Math.PI + pos * Math.PI;
        return Math.sin(deg) * rad;
      };
      arcGroup.selectAll('.ticks').data((function() {
        results = [];
        for (var j = 0; 0 <= tickCount ? j <= tickCount : j >= tickCount; 0 <= tickCount ? j++ : j--){ results.push(j); }
        return results;
      }).apply(this)).enter().append('line').attr('class', 'tick').attr('x1', function(d) {
        return getTickX(d, 110);
      }).attr('y1', function(d) {
        return getTickY(d, 110);
      }).attr('x2', function(d) {
        return getTickX(d, 85);
      }).attr('y2', function(d) {
        return getTickY(d, 85);
      });
      tickScale = d3.scale.linear().range([min, max]);
      arcGroup.selectAll('.ticks').data((function() {
        results1 = [];
        for (var k = 0; 0 <= tickCount ? k <= tickCount : k >= tickCount; 0 <= tickCount ? k++ : k--){ results1.push(k); }
        return results1;
      }).apply(this)).enter().append('text').attr('class', 'tickText').attr('x', function(d) {
        return getTickX(d, 122);
      }).attr('y', function(d) {
        return getTickY(d, 122);
      }).text(function(d) {
        return tickScale(d / tickCount);
      });
      return gauge.update = function() {
        var scale;
        scale = d3.scale.linear().domain([min, max]).range([0, 1]);
        arcElm.transition().duration(1500).ease('elastic').attrTween('d', arcTween(arc, renderValue, scale(value)));
        renderValue = scale(value);
        return text.text((Math.round(value)) + "%");
      };
    };
    plugin.addConfigurations(this, gauge, ['min', 'max', 'value', 'text'], [0, 100, 76, 'no text']);
    return gauge;
  };

  console.log('gauge test 2');

  width = 800;

  height = 600;

  svg = d3.select('body').append('svg').attr('width', width).attr('height', height);

  gauge2 = plugin.gauge().min(-10).max(40).value(10).text('load');

  window.gauge = gauge2;

  svg.append('g').attr('id', 'gauge1').attr('class', 'gauge').attr('transform', "translate(" + 400. + ", " + 300. + ") scale(2)").call(gauge2);

  i = 0;

  g = .5;

  setInterval(function() {
    var newVal, oldVal;
    if (i >= 100) {
      g += .5;
      i = 0;
    }
    oldVal = i / 100;
    i += g * 10;
    newVal = i / 100;
    return gauge2.value(Math.random() * (gauge.max() - gauge.min()) + gauge.min()).update();
  }, 1000);

}).call(this);

//# sourceMappingURL=data:application/json;base64,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QWJGO0FBektBIiwiZmlsZSI6ImdhdWdlMi5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIiMgcHNldWRvIHBsdWdpbiBjb250YWluZXJcclxucGx1Z2luID0ge31cclxuXHJcbiMgaGVscGVyIGZ1bmN0aW9uIGZvciBzZXR0aW5nc1xyXG5wbHVnaW4uYWRkQ29uZmlndXJhdGlvbnMgPSAob3V0ZXIsIG9iaiwgc2V0dGluZ3MsIGRlZmF1bHRzKSAtPlxyXG4gIGZvciBzZXR0aW5nLCBpZHggaW4gc2V0dGluZ3NcclxuICAgIFxyXG4gICAgb2JqW3NldHRpbmddID0gKChzZXR0aW5nKSAtPlxyXG4gICAgICAobmV3VmFsKSAtPlxyXG4gICAgICAgIGlmIGFyZ3VtZW50cy5sZW5ndGggPT0gMFxyXG4gICAgICAgICAgcmV0dXJuIG91dGVyW3NldHRpbmddXHJcbiAgICAgICAgb3V0ZXJbc2V0dGluZ10gPSBuZXdWYWxcclxuICAgICAgICBvYmpcclxuICAgICkoc2V0dGluZylcclxuXHJcbiAgICBvdXRlcltzZXR0aW5nXSA9IGRlZmF1bHRzW2lkeF1cclxuXHJcbnBsdWdpbi5nYXVnZSA9ICgpIC0+XHJcbiAgbWluID0gMFxyXG4gIG1heCA9IDEwMFxyXG4gIHZhbHVlID0gMFxyXG4gIHJlbmRlclZhbHVlID0gMFxyXG4gIGJvdHR1bVRleHQgPSAnVmlzaXRvcnMnXHJcblxyXG4gICMgYXJjIGludGVycG9sYXRvclxyXG4gIGFyY1R3ZWVuID0gKGFyYywgb2xkVmFsLCBuZXdWYWwpIC0+XHJcbiAgICByZXR1cm4gKGQpIC0+XHJcbiAgICAgIGkgPSBkMy5pbnRlcnBvbGF0ZU51bWJlcihvbGRWYWwsIG5ld1ZhbClcclxuICAgICAgcmV0dXJuICh0KSAtPlxyXG4gICAgICAgIHJldHVybiBhcmMoaSh0KSlcclxuXHJcbiAgZ2F1Z2UgPSAoYXJjR3JvdXApIC0+XHJcbiAgICBjb25zb2xlLmxvZyBcImluaXQgZHJhdyAje21pbn0sICN7bWF4fSwgI3t2YWx1ZX0sICN7dGV4dH1cIlxyXG5cclxuICAgIGFyYyA9IGQzLnN2Zy5hcmMoKVxyXG4gICAgICAuc3RhcnRBbmdsZSgwLjc1ICogMiAqIE1hdGguUEkpXHJcbiAgICAgIC5lbmRBbmdsZSgoZCkgLT4gKDAuNzUgKiAyICogTWF0aC5QSSkgKyAoTWF0aC5taW4oTWF0aC5tYXgoZCwgMCksIDEpICogTWF0aC5QSSkpXHJcbiAgICAgIC5pbm5lclJhZGl1cyg4NSlcclxuICAgICAgLm91dGVyUmFkaXVzKDExMClcclxuXHJcbiAgICBvdXRlckFyYyA9IGQzLnN2Zy5hcmMoKVxyXG4gICAgICAuc3RhcnRBbmdsZSgwLjc1ICogMiAqIE1hdGguUEkpXHJcbiAgICAgIC5lbmRBbmdsZSgwLjc1ICogMiAqIE1hdGguUEkgKyBNYXRoLlBJKVxyXG4gICAgICAuaW5uZXJSYWRpdXMoODUpXHJcbiAgICAgIC5vdXRlclJhZGl1cygxMTApXHJcblxyXG4gICAgb3V0ZXJPdXRlckFyYyA9IGQzLnN2Zy5hcmMoKVxyXG4gICAgICAuc3RhcnRBbmdsZSgwLjc1ICogMiAqIE1hdGguUEkpXHJcbiAgICAgIC5lbmRBbmdsZSgwLjc1ICogMiAqIE1hdGguUEkgKyBNYXRoLlBJKVxyXG4gICAgICAuaW5uZXJSYWRpdXMoODUpXHJcbiAgICAgIC5vdXRlclJhZGl1cygxMTApXHJcblxyXG4gICAgIyBjZW50ZXIgdGV4dFxyXG4gICAgdGV4dCA9IGFyY0dyb3VwLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgIC5hdHRyKCd5JywgLTI1KVxyXG4gICAgICAuYXR0cignY2xhc3MnLCAnaW5uZXJUZXh0JylcclxuICAgICAgLnRleHQoXCIje01hdGgucm91bmQodmFsdWUpfSVcIilcclxuXHJcbiAgICAjIGJvdHR1bSB0ZXh0XHJcbiAgICBhcmNHcm91cC5hcHBlbmQoJ3RleHQnKVxyXG4gICAgICAuYXR0cigneScsIDApXHJcbiAgICAgIC5zdHlsZSgndGV4dC1hbmNob3InLCAnbWlkZGxlJylcclxuICAgICAgLnN0eWxlKCdmaWxsJywgJ2JsYWNrJylcclxuICAgICAgLnN0eWxlKCdmb250LXNpemUnLCAnMS4yZW0nKVxyXG4gICAgICAudGV4dChib3R0dW1UZXh0KVxyXG5cclxuICAgICMgYmFja2dyb3VuZCBhcmNcclxuICAgIGFyY0dyb3VwLmFwcGVuZCgncGF0aCcpXHJcbiAgICAgIC5hdHRyKCdkJywgb3V0ZXJBcmMpXHJcbiAgICAgIC5hdHRyKCdjbGFzcycsICdvdXRsaW5lJylcclxuXHJcbiAgICAjIGFjdHVhbCBhcmNcclxuICAgIHJlbmRlclZhbHVlID0gdmFsdWUgLyAobWF4LW1pbilcclxuICAgIGFyY0VsbSA9IGFyY0dyb3VwLmFwcGVuZCgncGF0aCcpLmRhdGEoW3JlbmRlclZhbHVlXSlcclxuICAgICAgLmF0dHIoJ2QnLCAoZCkgLT4gYXJjKGQpKVxyXG4gICAgICAuYXR0cignY2xhc3MnLCAnYmFyJylcclxuXHJcbiAgICAjIHRpY2tzXHJcbiAgICB0aWNrQ291bnQgPSA1XHJcbiAgICBnZXRUaWNrWCAgPSAobiwgcmFkKSAtPlxyXG4gICAgICBwb3MgPSBuIC8gdGlja0NvdW50XHJcbiAgICAgIGRlZyA9IC1NYXRoLlBJICsgcG9zICogTWF0aC5QSVxyXG4gICAgICBNYXRoLmNvcyhkZWcpICogcmFkXHJcbiAgICBcclxuICAgIGdldFRpY2tZICA9IChuLCByYWQpIC0+XHJcbiAgICAgIHBvcyA9IG4gLyB0aWNrQ291bnRcclxuICAgICAgZGVnID0gLU1hdGguUEkgKyBwb3MgKiBNYXRoLlBJXHJcbiAgICAgIE1hdGguc2luKGRlZykgKiByYWRcclxuXHJcbiAgICBhcmNHcm91cC5zZWxlY3RBbGwoJy50aWNrcycpLmRhdGEoWzAgLi4gdGlja0NvdW50XSkuZW50ZXIoKS5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAuYXR0cignY2xhc3MnLCAndGljaycpXHJcbiAgICAgIC5hdHRyKCd4MScsIChkKSAtPiBnZXRUaWNrWChkLCAxMTApKVxyXG4gICAgICAuYXR0cigneTEnLCAoZCkgLT4gZ2V0VGlja1koZCwgMTEwKSlcclxuICAgICAgLmF0dHIoJ3gyJywgKGQpIC0+IGdldFRpY2tYKGQsIDg1KSlcclxuICAgICAgLmF0dHIoJ3kyJywgKGQpIC0+IGdldFRpY2tZKGQsIDg1KSlcclxuXHJcbiAgICB0aWNrU2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbbWluLCBtYXhdKVxyXG5cclxuICAgIGFyY0dyb3VwLnNlbGVjdEFsbCgnLnRpY2tzJykuZGF0YShbMCAuLiB0aWNrQ291bnRdKS5lbnRlcigpLmFwcGVuZCgndGV4dCcpXHJcbiAgICAgIC5hdHRyKCdjbGFzcycsICd0aWNrVGV4dCcpXHJcbiAgICAgIC5hdHRyKCd4JywgKGQpIC0+IGdldFRpY2tYKGQsIDEyMikpXHJcbiAgICAgIC5hdHRyKCd5JywgKGQpIC0+IGdldFRpY2tZKGQsIDEyMikpXHJcbiAgICAgIC50ZXh0KChkKSAtPiB0aWNrU2NhbGUoZC90aWNrQ291bnQpKVxyXG5cclxuXHJcbiAgICBnYXVnZS51cGRhdGUgPSAoKSAtPlxyXG4gICAgICBzY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpLmRvbWFpbihbbWluLCBtYXhdKS5yYW5nZShbMCwgMV0pXHJcblxyXG4gICAgICBhcmNFbG0udHJhbnNpdGlvbigpLmR1cmF0aW9uKDE1MDApLmVhc2UoJ2VsYXN0aWMnKSMuZWFzZSgoeCkgLT4gKHgrLjIpJTEpIy5lYXNlKCdsaW5lYXInKVxyXG4gICAgICAgIC5hdHRyVHdlZW4oJ2QnLCBhcmNUd2VlbihhcmMsIHJlbmRlclZhbHVlLCBzY2FsZSh2YWx1ZSkpIClcclxuXHJcbiAgICAgIHJlbmRlclZhbHVlID0gc2NhbGUodmFsdWUpXHJcblxyXG4gICAgICB0ZXh0LnRleHQoXCIje01hdGgucm91bmQodmFsdWUpfSVcIilcclxuXHJcblxyXG4gICMgZ2V0dGVyIC8gc2V0dGVyIC8gY2hhaW5hYmxlXHJcbiAgcGx1Z2luLmFkZENvbmZpZ3VyYXRpb25zKHRoaXMsIGdhdWdlLCBbJ21pbicsICdtYXgnLCAndmFsdWUnLCAndGV4dCddLCBbMCwgMTAwLCA3NiwgJ25vIHRleHQnXSlcclxuICBcclxuXHJcbiAgIyBnYXVnZS5taW4gPSAobmV3VmFsKSAtPlxyXG4gICMgICBpZiBhcmd1bWVudHMubGVuZ3RoID09IDBcclxuICAjICAgICByZXR1cm4gbWluXHJcbiAgIyAgIG1pbiA9IG5ld1ZhbFxyXG4gICMgICBnYXVnZVxyXG4gICMgZ2F1Z2UubWF4ID0gKG5ld1ZhbCkgLT5cclxuICAjICAgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAwXHJcbiAgIyAgICAgcmV0dXJuIG1heFxyXG4gICMgICBtYXggPSBuZXdWYWxcclxuICAjICAgZ2F1Z2VcclxuICAjIGdhdWdlLnZhbHVlID0gKG5ld1ZhbCkgLT5cclxuICAjICAgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAwXHJcbiAgIyAgICAgcmV0dXJuIHZhbHVlXHJcbiAgIyAgIHZhbHVlID0gbmV3VmFsXHJcbiAgIyAgIGdhdWdlXHJcbiAgIyBnYXVnZS50ZXh0ID0gKG5ld1ZhbCkgLT5cclxuICAjICAgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAwXHJcbiAgIyAgICAgcmV0dXJuIGJvdHR1bVRleHRcclxuICAjICAgYm90dHVtVGV4dCA9IG5ld1ZhbFxyXG4gICMgICBnYXVnZVxyXG5cclxuICBnYXVnZVxyXG5cclxuY29uc29sZS5sb2cgJ2dhdWdlIHRlc3QgMidcclxuXHJcbndpZHRoICA9IDgwMFxyXG5oZWlnaHQgPSA2MDBcclxuXHJcbnN2ZyA9IGQzLnNlbGVjdCgnYm9keScpLmFwcGVuZCgnc3ZnJylcclxuICAuYXR0cignd2lkdGgnLCB3aWR0aClcclxuICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KVxyXG5cclxuZ2F1Z2UyID0gcGx1Z2luLmdhdWdlKClcclxuICAubWluKC0xMClcclxuICAubWF4KDQwKVxyXG4gICMgLm1heCg3MClcclxuICAudmFsdWUoMTApXHJcbiAgLnRleHQoJ2xvYWQnKVxyXG5cclxud2luZG93LmdhdWdlID0gZ2F1Z2UyXHJcblxyXG5zdmcuYXBwZW5kKCdnJylcclxuICAgIC5hdHRyKCdpZCcsICdnYXVnZTEnKVxyXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2dhdWdlJylcclxuICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBcInRyYW5zbGF0ZSgjezQwMH0sICN7MzAwfSkgc2NhbGUoMilcIilcclxuICAgIC5jYWxsKGdhdWdlMilcclxuXHJcblxyXG5pID0gMFxyXG5nID0gLjVcclxuc2V0SW50ZXJ2YWwgKCkgLT5cclxuICBpZiBpID49IDEwMFxyXG4gICAgZyArPSAuNVxyXG4gICAgaSA9IDBcclxuXHJcbiAgb2xkVmFsID0gaS8xMDBcclxuICBpICs9IGcqMTBcclxuICBuZXdWYWwgPSBpIC8xMDBcclxuICAjIGkgPSBpJTEwMFxyXG5cclxuICBnYXVnZTIudmFsdWUoIChNYXRoLnJhbmRvbSgpICogKGdhdWdlLm1heCgpLWdhdWdlLm1pbigpKSArIGdhdWdlLm1pbigpICkpLnVwZGF0ZSgpXHJcbiAgXHJcblxyXG4sIDEwMDBcclxuIl19
